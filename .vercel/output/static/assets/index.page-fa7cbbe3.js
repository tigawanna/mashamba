import{a as g,C as d,_}from"./client-bdf63c2a.js";import{a as o}from"./jsx-runtime-6a3157d9.js";import{r as i}from"./index-e76fa941.js";import{c as y}from"./concatErrors-9ce0d561.js";import{u as h}from"./useGeoLocation-7b1cbf9f.js";import{p as w}from"./pocketbase-94492600.js";const E=i.lazy(()=>_(()=>import("./ListingsForm-c6ada06f.js"),["assets/ListingsForm-c6ada06f.js","assets/jsx-runtime-6a3157d9.js","assets/index-e76fa941.js","assets/hoist-non-react-statics.cjs-13dff383.js","assets/client-bdf63c2a.js","assets/ReactLeafletMapCard-7d109b37.js","assets/useGeoLocation-7b1cbf9f.js","assets/ReactLeafletMapCard-3625237c.css","assets/pocketbase-94492600.js","assets/index-b8d29899.js","assets/index-60c67a20.js","assets/ListingsForm-5d54d688.css"]));function N(){const{position:n}=h(),[l,t]=i.useState({name:"",message:""}),[m,c]=i.useState({location:"",longitude:n.lng,latitude:n.lat,description:"",status:"available",images:[],amenities:{type:"land",size:"",water_source:"piped",elecricity_source:"utility pole",bathrooms:1,bedrooms:1,fireplace:1,garages:1,swimming_pool:1,closest_hospital:"less than 20 minutes away",closest_police_station:"less than 20 minutes away",closest_school:"less than 20 minutes away",closest_town:"less than 20 minutes away",gated_community:!1,parking:!1,pavements:!1,street_lights:!1},owner:""});async function u(e){var r;const p=["amenities","images"],a=new FormData;e.images&&((r=e.images)==null||r.forEach(s=>{a.append("images",s)})),e.amenities&&a.append("amenities",JSON.stringify(e.amenities));for(const s in e)!p.includes(s)&&e[s]!==""&&a.append(s,e[s]);return await w.collection("listings").create(a)}const f=g(e=>u(e),{onSuccess:()=>{t({name:"",message:""})},onError:e=>{console.log("rakkas useMutaion error  === ",e),t({name:"main",message:y(e)})}});return o("main",{className:"w-full min-h-screen h-full flex flex-col justify-center items-center",children:o(d,{fallback:"loading...",children:o(E,{label:"Add New Listing",mutation:f,input:m,setInput:c,error:l,setError:t})})})}export{N as default};
