import{b as w,a as S,C as x,_ as E,p as b}from"./client-19dc8309.js";import{a as i}from"./jsx-runtime-6a3157d9.js";import{r as o}from"./index-e76fa941.js";import{c as v}from"./concatErrors-9ce0d561.js";import{u as k}from"./useGeoLocation-7b1cbf9f.js";const L=o.lazy(()=>E(()=>import("./ListingsForm-4f1fce8a.js"),["assets/ListingsForm-4f1fce8a.js","assets/jsx-runtime-6a3157d9.js","assets/index-e76fa941.js","assets/checkIfObjectHasemptyField-b2dc686a.js","assets/checkIfObjectHasemptyField-5d54d688.css","assets/hoist-non-react-statics.cjs-13dff383.js","assets/emotion-serialize.browser.esm-317add79.js","assets/client-19dc8309.js","assets/ReactLeafletMapCard-9553a728.js","assets/useGeoLocation-7b1cbf9f.js","assets/ReactLeafletMapCard-3625237c.css","assets/index-b8d29899.js","assets/index-60c67a20.js"]));function I({params:t}){const{position:r}=k(),[m,n]=o.useState({name:"",message:""}),[u,P]=o.useState({filter_id:t.id,perPage:3,page:1,sort:"-created",expand:"owner"}),{data:c,refetch:O}=w(["1",0,[t,u]],{refetchOnWindowFocus:!0,refetchOnReconnect:!0});if(!c)return i("div",{children:"Loading..."});const d=c.items[0],f={location:"",longitude:r.lng,latitude:r.lat,description:"",status:"available",images:[],amenities:{type:"land",size:"50 x 100",water_source:"piped",elecricity_source:"utility pole",bathrooms:1,bedrooms:1,fireplace:1,garages:1,swimming_pool:1,closest_hospital:"less than 20 minutes away",closest_police_station:"less than 20 minutes away",closest_school:"less than 20 minutes away",closest_town:"less than 20 minutes away",gated_community:!1,parking:!1,pavements:!1,street_lights:!1},owner:""},[p,g]=o.useState(d??f);async function _(e){var l;const y=["amenities","images"],a=new FormData;e.images&&((l=e.images)==null||l.forEach(s=>{a.append("images",s)})),e.amenities&&a.append("amenities",JSON.stringify(e.amenities));for(const s in e)!y.includes(s)&&e[s]!==""&&a.append(s,e[s]);return await b.collection("listings").update(t.id,a)}const h=S(e=>_(e),{onSuccess:()=>{n({name:"",message:""})},onError:e=>{console.log("rakkas useMutaion error  === ",e),n({name:"main",message:v(e)})}});return i("main",{className:"w-full min-h-screen h-full flex flex-col justify-center items-center",children:i(x,{fallback:"loading...",children:i(L,{label:"Edit "+t.id,mutation:h,input:p,setInput:g,error:m,setError:n})})})}export{I as default};
