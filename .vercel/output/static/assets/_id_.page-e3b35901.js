import{_ as S,b as k,m as y,H as L,p as _,L as b,C as G}from"./client-19dc8309.js";import{j as r,a as t}from"./jsx-runtime-6a3157d9.js";import{f as j,e as E,g as P}from"./index-6932149c.js";import{r as C,T as f}from"./index-b8d29899.js";import{r as l}from"./index-e76fa941.js";import{L as O}from"./landscapp-9cde5c42.js";var p=C.GenIcon,U=function(a){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",stroke:"#000",strokeWidth:"2",points:"7.086 3.174 17.086 13.174 7.086 23.174",transform:"scale(1 -1) rotate(-89 -1.32 0)"}}]})(a)},W=function(a){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",stroke:"#000",strokeWidth:"2",points:"7 2 17 12 7 22"}}]})(a)},A=function(a){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",stroke:"#000",strokeWidth:"2",points:"7 2 17 12 7 22",transform:"matrix(-1 0 0 1 24 0)"}}]})(a)},D=function(a){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"polyline",attr:{fill:"none",stroke:"#000",strokeWidth:"2",points:"7.086 1.174 17.086 11.174 7.086 21.174",transform:"rotate(-89 12.086 11.174)"}}]})(a)};const T=({height:c=100,width:a=100,imgs:s,autoScroll:w=!1,autoSrollLoop:o=!1,...g})=>{const[n,d]=l.useState({img:(s&&s[0])??O,idx:0}),[e,x]=l.useState(n.img),[h,m]=l.useState(!0),u=()=>{d(i=>i.idx<s.length-1?(m(!0),{img:s[i.idx+1],idx:i.idx+1}):i)},v=()=>{d(i=>i.idx>0?(m(!0),{img:s[i.idx-1],idx:i.idx-1}):i)};return l.useEffect(()=>{if(w){const i=setInterval(()=>{n.idx<s.length-1&&u()},5e3);return()=>clearInterval(i)}},[]),l.useEffect(()=>{if(o){const i=setInterval(()=>{n.idx===s.length-1&&d({img:s[0],idx:0})},5e3);return()=>clearInterval(i)}},[n.idx]),l.useEffect(()=>{let i=!0,I;const N=new Image;return N.src=n.img,N.onload=()=>{i&&(I=setTimeout(()=>{x(n.img),m(!1)},500))},()=>{i=!1,clearTimeout(I)}},[n.img,n.idx]),r("div",{className:" w-full lg:w-[50%] h-[50%] flex items-center justify-center gap-2 ",children:[n.idx!==0?t(f,{Icon:A,iconAction:()=>{v()}}):null,t("div",{className:" w-[80%]  h-[50%] flex items-center justify-center gap-2 ",children:t("img",{style:{filter:h?"blur(10px)":"none"},src:e,alt:g.props.alt,height:c,width:a,loading:"lazy",className:"h-full w-full  aspect-video animate-in fade-in duration-500 rounded-lg",...g})}),n.idx!==s.length-1?t(f,{Icon:W,iconAction:()=>{u()}}):null]})},B=l.lazy(()=>S(()=>import("./ReactLeafletMapCard-9553a728.js"),["assets/ReactLeafletMapCard-9553a728.js","assets/jsx-runtime-6a3157d9.js","assets/index-e76fa941.js","assets/useGeoLocation-7b1cbf9f.js","assets/client-19dc8309.js","assets/ReactLeafletMapCard-3625237c.css"])),M=function({params:a}){var m,u;const[s,w]=l.useState({filter_id:a.id,perPage:3,page:1,sort:"-created",expand:"owner"}),{data:o,refetch:g}=k(["0",0,[a,s]],{refetchOnWindowFocus:!0,refetchOnReconnect:!0}),[n,d]=l.useState(!0);if(!o)return t("div",{children:"Loading..."});const e=o.items[0],x=y("listings",e==null?void 0:e.id,(m=o==null?void 0:o.items[0])==null?void 0:m.images[0]),h=()=>e==null?void 0:e.images.map(v=>y("listings",e==null?void 0:e.id,v));return r("main",{className:"w-full h-full min-h-screen flex flex-col items-center justify-center",children:[r(L,{title:e.location,children:[t("link",{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}),t("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t("meta",{httpEquiv:"X-UA-Compatible",content:"ie=edge"}),t("meta",{name:"description",content:e.description}),t("meta",{name:"keywords",content:e.description})]}),r("div",{className:"w-full h-full flex flex-col items-center justify-center gap-2",children:[(u=_.authStore.model)!=null&&u.id?r(b,{className:"text-lg text-purple-900 hover:text-purple-800",href:`../admin/${e==null?void 0:e.id}`,children:[" ","Edit"," "]}):null,r("div",{className:"w-[90%]  flex flex-col lg:flex-row  items-center justify-center rounded-2xl m-2",children:[t(T,{imgs:h(),height:"300px",width:"600px",props:{className:"w-[80%]",src:x,alt:e==null?void 0:e.location}}),r("div",{className:"font-serif p-5 w-[90%] lg:w-[40%]",children:[r("div",{className:"flex items-center justify-start gap-5",children:[t("h1",{className:"text-2xl font-bold",children:e.location}),r("p",{className:"font-semibold font-sans text-2xl text-purple-900",children:[e.price.toLocaleString("en-US")," Ksh"]})]}),t("p",{className:n?"text-sm line-clamp-5 mt-4":"text-sm mt-4",children:e.description}),t("button",{onClick:()=>d(!n),className:"bg-slate-900 p-1",children:t(f,{Icon:n?U:D,iconAction:()=>{d(!n)}})}),r("div",{className:"border-t ",children:[r("p",{className:"text-sm font-semibold",children:["Owner: ",e.expand.owner.name]}),r("p",{className:"text-sm flex gap-1",children:[t(f,{Icon:j}),e.expand.owner.phone]}),r("p",{className:"text-sm flex gap-1",children:[t(f,{Icon:E}),e.expand.owner.whatsapp]}),r("p",{className:"text-sm flex gap-1",children:[t(f,{Icon:P}),e.expand.owner.email]})]})]})]},e.id),t("div",{className:"w-full flex flex-row  items-center justify-center",children:t("div",{className:"w-[90%] md:w-[70%] p-5 ",children:t(G,{fallback:"loading",children:t(B,{display_only:!0,coords:{lat:e.longitude,lng:e.longitude}})})})})]})]})};export{M as default};
